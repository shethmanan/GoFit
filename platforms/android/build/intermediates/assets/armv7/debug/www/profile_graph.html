<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" href="css/materialize.css" media="screen,projection" />
	<title>Profile || graphs</title>
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/navbar.css">
	<link rel="stylesheet" href="css/input-field-style.css" media="screen" title="no title" charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" href="css\chartist.min.css">
	<link rel="stylesheet" type="text/css" href="css/my-icons-collection/font/flaticon.css">
	<style type="text/css">
		.tabs .indicator {
			height: 3px;
			background-color: #82b1ff;
		}
		/*.icon{
			font-size: 100px;
		}
		[class^="flaticon-"]:before,
		[class*=" flaticon-"]:before,
		[class^="flaticon-"]:after,
		[class*=" flaticon-"]:after {
			font-size: 80px;
		}*/

		.ct-series-a .ct-line {
			/* Set the colour of this series line */
			stroke: red;
			/* Control the thikness of your lines */
			stroke-width: 3px;
			/* Create a dashed line with a pattern */
			/*stroke-dasharray: 10px 20px;*/
		}

		.ct-series-a .ct-point {
			/* Colour of your points */
			stroke: red;
			/* Size of your points */
			stroke-width: 10px;
			/* Make your points appear as squares */
			stroke-linecap: circle;
			show-point: false;
		}

		#nav-btn {
			padding-left: 0px;
		}
	</style>
</head>

<body>
	<!-- side nav -->
	<div class="side-section">
		<ul class="side-nav fixed blue lighten-3" style="left:0px">
			<li class="logo" style="background-color:transparent;">
				<a href="edit_profile.html"><img class="profile-pic circle" id="dp"></a>
			</li>
			<li class="blue lighten-3"><a href="navbar.html" class="waves-effect waves-lighten" style="color:#1976d2;">Dash Board</a></li>
			<li class="blue lighten-3"><a href="remider.html" class="waves-effect waves-lighten" style="color:#1976d2;">Set Reminders</a></li>
			<li class="blue lighten-3"><a href="updated_walk.html" class="waves-effect waves-lighten" style="color:#1976d2;">Exercise</a></li>
			<ul class="collapsible collapsible-accordion">
				<li class="blue lighten-3">
					<a class="collapsible-header" class="waves-effect waves-lighten" style="color:#1976d2;">Calculators</a>
					<div class="collapsible-body">
						<ul>
							<li class="blue lighten-3">
								<a href="BMICal.html" class="waves-effect waves-lighten" style="color:#1976d2;">BMI Calculator</a>
							</li>
							<li class="blue lighten-3">
								<a href="calorieCalculator.html" class="waves-effect waves-lighten" style="color:#1976d2;">Calorie Calculator</a>
							</li>
						</ul>
					</div>
				</li>
			</ul>

			<li class="blue lighten-3"><a href="feedback.html" class="waves-effect waves-lighten" style="color:#1976d2;">Feedback</a></li>
		</ul>
	</div>
	<main>
		<!-- side nav btn -->
		<div class="row blue darken-2 no-margin">
			<a class="waves-effect waves-lighten btn-flat large" id="nav-btn">
				<i class="large flaticon-interface" style="color:white;font-size: xx-large;padding-left:0px;"></i>
			</a>
		</div>
		<!-- side nav btn ends -->
		<!-- side nav -->

		<div class="row">
			<div class="col s12 no-padding">
				<ul class="tabs blue darken-1 no-margin">
					<li class="tab col s6">
						<a id="run-counter" href="#run-tab" class="white-text">RUNS</a>
					</li>
					<li class="tab col s6">
						<a id="walk-counter" href="#walk-tab" class="white-text">WALK</a>
					</li>
					<li class="tab col s6">
						<a id="cycle-counter" href="#cycle-tab" class="white-text">Cycle</a>
					</li>
				</ul>
				<div id="run-tab">
					<div class="row">
						<div class="col s12">
							<div id="run-c" class="ct-perfect-fifth">

							</div>
						</div>
					</div>
					<div class="row">
						<div class="col s6">
							<div class="row">
								<div class="col s6">
									<span>Monday</span>
								</div>
								<div class="col s6">
									<span id="mon-run"></span>
								</div>
							</div>
							<div class="row">
								<div class="col s6">
									<span>Tuesday</span>
								</div>
								<div class="col s6">
									<span id="tue-run"></span>
								</div>
							</div>
							<div class="row">
								<div class="col s6">
									<span>Wednesday</span>
								</div>
								<div class="col s6">
									<span id="wed-run"></span>
								</div>
							</div>
							<div class="row">
								<div class="col s6">
									<span>Thursday</span>
								</div>
								<div class="col s6">
									<span id="thu-run"></span>
								</div>
							</div>
							<div class="row">
								<div class="col s6">
									<span>Friday</span>
								</div>
								<div class="col s6">
									<span id="fri-run"></span>
								</div>
							</div>
							<div class="row">
								<div class="col s6">
									<span>Saturday</span>
								</div>
								<div class="col s6">
									<span id="sat-run"></span>
								</div>
							</div>
							<div class="row">
								<div class="col s6">
									<span>Sunday</span>
								</div>
								<div class="col s6">
									<span id="sun-run"></span>
								</div>
							</div>
						</div>
						<div class="col s6">
							<div class="row">
								<div class="col s6">
									<span>Total Steps</span>
								</div>
								<div class="col s6">
									<span id="total-steps-run">00</span>
								</div>
							</div>
							<div class="row">
								<div class="col s6">
									<span>Highest Steps</span>
								</div>
								<div class="col s6">
									<span id="highest-steps-run">00</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div id="walk-tab">
					<div class="row">
						<div class="col s12">
							<div id="walk-c" class="ct-perfect-fifth">

							</div>
							<div class="row">
								<div class="col s6">
									<div class="row">
										<div class="col s6">
											<span>Monday</span>
										</div>
										<div class="col s6">
											<span id="mon-walk"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Tuesday</span>
										</div>
										<div class="col s6">
											<span id="tue-walk"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Wednesday</span>
										</div>
										<div class="col s6">
											<span id="wed-walk"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Thursday</span>
										</div>
										<div class="col s6">
											<span id="thu-walk"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Friday</span>
										</div>
										<div class="col s6">
											<span id="fri-walk"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Saturday</span>
										</div>
										<div class="col s6">
											<span id="sat-walk"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Sunday</span>
										</div>
										<div class="col s6">
											<span id="sun-walk"></span>
										</div>
									</div>
								</div>
								<div class="col s6">
									<div class="row">
										<div class="col s6">
											<span>Total Steps</span>
										</div>
										<div class="col s6">
											<span id="total-steps-walk">00</span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Highest Steps</span>
										</div>
										<div class="col s6">
											<span id="highest-steps-walk">00</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div id="cycle-tab">
					<div class="row">
						<div class="col s12">
							<div id="cycle-c" class="ct-perfect-fifth">

							</div>
							<div class="row">
								<div class="col s6">
									<div class="row">
										<div class="col s6">
											<span>Monday</span>
										</div>
										<div class="col s6">
											<span id="mon-cycle"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Tuesday</span>
										</div>
										<div class="col s6">
											<span id="tue-cycle"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Wednesday</span>
										</div>
										<div class="col s6">
											<span id="wed-cycle"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Thursday</span>
										</div>
										<div class="col s6">
											<span id="thu-cycle"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Friday</span>
										</div>
										<div class="col s6">
											<span id="fri-cycle"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Saturday</span>
										</div>
										<div class="col s6">
											<span id="sat-cycle"></span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Sunday</span>
										</div>
										<div class="col s6">
											<span id="sun-cycle"></span>
										</div>
									</div>
								</div>
								<div class="col s6">
									<div class="row">
										<div class="col s6">
											<span>Total Steps</span>
										</div>
										<div class="col s6">
											<span id="total-steps-cycle">00</span>
										</div>
									</div>
									<div class="row">
										<div class="col s6">
											<span>Highest Steps</span>
										</div>
										<div class="col s6">
											<span id="highest-steps-cycle">00</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		</div>
		</div>
		<script type="text/javascript" src="js/jquery.js"></script>
		<script type="text/javascript" src="js/materialize.js"></script>
		<script type="text/javascript" src="js/navbar-transition.js"></script>
		<script type="text/javascript" src="js/chartist.min.js"></script>
		<script type="text/javascript">
			var db = openDatabase('GoFit', '1.0', 'Test DB', 2 * 1024 * 1024);
			var mon;
			var tue;
			var wed;
			var thu;
			var fri;
			var sat;
			var sun;
			var highest_steps;
			var total_steps;
			$(document).ready(function() {
				retrieveVal("updated_run", "run", "run-c")
				var personaldetails = localStorage.getItem("user");
				var details = JSON.parse(personaldetails);
				var img = document.getElementById('dp');
				img.src = details.img;
				$('ul.tabs').tabs();
				// $("#status_text").hide();
				$("#walk-counter").click(function() {
					retrieveVal("updated_walk", "walk", "walk-c");
				});
				$("#cycle-counter").click(function() {
					retrieveVal("updated_cycle", "cycle", "cycle-c");
				});
			});

			function makeChart(mon, tue, wed, thu, fri, sat, sun, id) {
				var data = {
					// A labels array that can contain any sort of values
					labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
					// Our series array that contains series objects or in this case series data arrays
					series: [
						[mon, tue, wed, thu, fri, sat, sun]
					]
				};
				var option = {
					showPoint: true,
					showArea: true
				};
				var chart = new Chartist.Line('#' + id, data, option);
				chart.on('draw', function(data) {
					if (data.type === 'line' || data.type === 'area') {
						data.element.animate({
							d: {
								begin: 2000 * data.index,
								dur: 2000,
								from: data.path.clone().scale(1, 0).translate(0, data.chartRect.height()).stringify(),
								to: data.path.clone().stringify(),
								easing: Chartist.Svg.Easing.easeOutQuint
							}
						});
					}
				});
			}

			function retrieveVal(table_name, day_id, chart_id) {
				mon = 0;
				tue = 0;
				wed = 0;
				thu = 0;
				fri = 0;
				sat = 0;
				sun = 0;
				db.transaction(function(tx) {
						var qry = "select day,sum(steps) as steps from " + table_name + " group by day";
						console.log(qry);
						tx.executeSql(qry, [], function(tx, data) {
								console.log(data);
								for (var i = 0; i < data.rows.length; i++) {
									var day = data.rows[i].day;
									switch (day) {
										case 1:
											console.log("0:" + data.rows[i].steps);
											mon = data.rows[i].steps;
											break;
										case 2:
											console.log("1:" + data.rows[i].steps);
											tue = data.rows[i].steps;
											break;
										case 3:
											console.log("2:" + data.rows[i].steps);
											wed = data.rows[i].steps;
											break;
										case 4:
											console.log("3:" + data.rows[i].steps);
											thu = data.rows[i].steps;
											break;
										case 5:
											console.log("4:" + data.rows[i].steps);
											fri = data.rows[i].steps;
											console.log("inside switch : "+fri)
											break;
										case 6:
											console.log("5:" + data.rows[i].steps);
											sat = data.rows[i].steps;
											break;
										case 0:
											console.log("6:" + data.rows[i].steps);
											sun = data.rows[i].steps;
											break;
									}
								}
								makeChart(mon, tue, wed, thu, fri, sat, sun, '' + chart_id);
								$("#mon-" + day_id).html(mon); $("#tue-" + day_id).html(tue); $("#wed-" + day_id).html(wed); $("#thu-" + day_id).html(thu); $("#fri-" + day_id).html(fri); $("#sat-" + day_id).html(
									sat); $("#sun-" + day_id).html(sun);
							})
							console.log("fri: "+fri)
						tx.executeSql("select max(steps)as highest from " + table_name, [], function(tx, data) {
							$("#highest-steps-" + day_id).html(data.rows[0].highest);
						})
						tx.executeSql("select sum(steps) as total from " + table_name, [], function(tx, data) {
						$("#total-steps-" + day_id).html(data.rows[0].total);
					})
				});
			}
		</script>
</body>

</html>
